{"ast":null,"code":"import _toConsumableArray from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useGetUserID}from\"../hooks/useGetUserID\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MyPosts=function MyPosts(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),myPosts=_useState2[0],setMyPosts=_useState2[1];var userID=useGetUserID();// eslint-disable-next-line\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),sortedByTags=_useState4[0],setSortedByTags=_useState4[1];useEffect(function(){var fetchMyPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,sortedPosts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://localhost:4000/posts/myPosts/\".concat(userID));case 3:response=_context.sent;sortedPosts=response.data.myPosts.sort(function(a,b){return b._id.localeCompare(a._id);});setMyPosts(sortedPosts);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchMyPosts(){return _ref.apply(this,arguments);};}();fetchMyPosts();},[userID]);var deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(postId){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"https://localhost:4000/posts/myPosts/delete/\".concat(userID),{data:{postId:postId},withCredentials:true});case 3:setMyPosts(myPosts.filter(function(post){return post._id!==postId;}));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function deletePost(_x){return _ref2.apply(this,arguments);};}();var navigate=useNavigate();var handleEditPost=function handleEditPost(postId){navigate(\"/editPost/\".concat(postId));};var sortPostsByTags=function sortPostsByTags(){var sortedPosts=_toConsumableArray(myPosts).sort(function(a,b){// Convert tags to lowercase and join them into a string for comparison\nvar aTags=a.tags.map(function(tag){return tag.toLowerCase();}).join();var bTags=b.tags.map(function(tag){return tag.toLowerCase();}).join();return aTags.localeCompare(bTags);});setMyPosts(sortedPosts);setSortedByTags(true);};var sortPostsById=function sortPostsById(){var sortedPosts=_toConsumableArray(myPosts).sort(function(a,b){return b._id.localeCompare(a._id);});setMyPosts(sortedPosts);setSortedByTags(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-4\",children:\"My Posts\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sortedByTags?sortPostsById:sortPostsByTags,children:sortedByTags?'Show Latest Posts':'Sort Posts By Tags'}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:myPosts.length===0?/*#__PURE__*/_jsxs(\"p\",{className:\"no-posts\",children:[\"No posts yet! Go to the\",/*#__PURE__*/_jsx(Link,{className:\"link\",to:\"/create-post\",children:\"Create Post\"}),\"to create your first post!\"]}):myPosts.map(function(post){return/*#__PURE__*/_jsxs(\"li\",{className:\"cardu\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body d-flex justify-content-between align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title\",children:post.title}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deletePost(post._id);},className:\"card-title-del\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEditPost(post._id);},className:\"card-title-edit\",children:\"Edit\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"img\",{src:post.imageUrl,alt:post.title,className:\"img-fluid\"}),/*#__PURE__*/_jsx(\"div\",{className:\"instructions\",children:/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",children:post.content})}),/*#__PURE__*/_jsx(\"div\",{className:\"tags\",children:post.tags.map(function(tag){return/*#__PURE__*/_jsx(\"ul\",{className:\"ingredient-list\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"card-text\",children:[\"#\",tag]})});})})]})]},post._id);})})]});};","map":{"version":3,"names":["React","useEffect","useState","useGetUserID","axios","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","MyPosts","_useState","_useState2","_slicedToArray","myPosts","setMyPosts","userID","_useState3","_useState4","sortedByTags","setSortedByTags","fetchMyPosts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","sortedPosts","wrap","_callee$","_context","prev","next","get","concat","sent","data","sort","a","b","_id","localeCompare","t0","console","log","stop","apply","arguments","deletePost","_ref2","_callee2","postId","_callee2$","_context2","delete","withCredentials","filter","post","_x","navigate","handleEditPost","sortPostsByTags","_toConsumableArray","aTags","tags","map","tag","toLowerCase","join","bTags","sortPostsById","className","children","onClick","length","to","title","src","imageUrl","alt","content"],"sources":["C:/Users/victo/Desktop/mern-community-app-copy/client/src/pages/myposts.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useGetUserID } from \"../hooks/useGetUserID\";\r\nimport axios from \"axios\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nexport const MyPosts = () => {\r\n  const [myPosts, setMyPosts] = useState([]);\r\n  const userID = useGetUserID();\r\n  // eslint-disable-next-line\r\n  const [sortedByTags, setSortedByTags] = useState(false);\r\n  useEffect(() => {\r\n    const fetchMyPosts = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://localhost:4000/posts/myPosts/${userID}`\r\n        );\r\n        const sortedPosts = response.data.myPosts.sort((a, b) => b._id.localeCompare(a._id));\r\n        setMyPosts(sortedPosts);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n\r\n    fetchMyPosts();\r\n  }, [userID]);\r\n\r\n  const deletePost = async (postId) => {\r\n    try {\r\n      await axios.delete(\r\n        `https://localhost:4000/posts/myPosts/delete/${userID}`,\r\n        { data: { postId }, withCredentials: true }\r\n      );\r\n      setMyPosts(myPosts.filter((post) => post._id !== postId));\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  \r\n  const navigate = useNavigate();\r\n  const handleEditPost = (postId) => {\r\n    navigate(`/editPost/${postId}`);\r\n  };\r\n  const sortPostsByTags = () => {\r\n    const sortedPosts = [...myPosts].sort((a, b) => {\r\n      // Convert tags to lowercase and join them into a string for comparison\r\n      const aTags = a.tags.map(tag => tag.toLowerCase()).join();\r\n      const bTags = b.tags.map(tag => tag.toLowerCase()).join();\r\n      return aTags.localeCompare(bTags);\r\n    });\r\n    setMyPosts(sortedPosts);\r\n    setSortedByTags(true);\r\n  };\r\n\r\n  const sortPostsById = () => {\r\n    const sortedPosts = [...myPosts].sort((a, b) => b._id.localeCompare(a._id));\r\n    setMyPosts(sortedPosts);\r\n    setSortedByTags(false);\r\n  };\r\n  return (\r\n    <div className=\"home-container\">\r\n      <h1 className=\"mt-4\">My Posts</h1>\r\n      <button onClick={sortedByTags ? sortPostsById : sortPostsByTags}>\r\n            {sortedByTags ? 'Show Latest Posts' : 'Sort Posts By Tags'}\r\n          </button>\r\n      <ul className=\"list-unstyled\">\r\n        {myPosts.length === 0 ? (\r\n          <p className=\"no-posts\">No posts yet! Go to the<Link className=\"link\" to=\"/create-post\">Create Post</Link>to create your first post!</p>\r\n        ) : (\r\n          \r\n          myPosts.map((post) => (\r\n            <li key={post._id} className=\"cardu\">\r\n              \r\n              <div className=\"card-body d-flex justify-content-between align-items-center\">\r\n                <div>\r\n                  <h2 className=\"card-title\">{post.title}</h2>\r\n                  <button onClick={() => deletePost(post._id)} className=\"card-title-del\">Delete</button>\r\n                  <button onClick={() => handleEditPost(post._id)}className=\"card-title-edit\">Edit</button>\r\n                </div>\r\n              </div>\r\n              <div className=\"card-body\">\r\n                <img src={post.imageUrl} alt={post.title} className=\"img-fluid\" />\r\n                <div className=\"instructions\">\r\n                  <p className=\"card-text\">{post.content}</p>\r\n                </div>\r\n                <div className=\"tags\">\r\n                  {post.tags.map((tag) => (\r\n                    <ul className=\"ingredient-list\">\r\n                      <li className=\"card-text\">#{tag}</li>\r\n                    </ul>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </li>\r\n          ))\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}