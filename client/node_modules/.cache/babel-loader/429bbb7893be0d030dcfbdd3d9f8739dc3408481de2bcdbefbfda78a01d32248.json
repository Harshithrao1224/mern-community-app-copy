{"ast":null,"code":"import _toConsumableArray from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useParams,useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var EditPost=function EditPost(){var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useParams=useParams(),postId=_useParams.postId;useEffect(function(){var fetchPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://localhost:4000/posts/\".concat(postId),{},{withCredentials:true});case 3:response=_context.sent;setPost(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchPost(){return _ref.apply(this,arguments);};}();fetchPost();},[postId]);var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var handleAddTag=function handleAddTag(){setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tags:[].concat(_toConsumableArray(prevState.tags),[\"\"])});});};var handleRemoveTag=function handleRemoveTag(index){var updatedTags=_toConsumableArray(post.tags);updatedTags.splice(index,1);setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tags:updatedTags});});};var handleTagChange=function handleTagChange(event,index){var value=event.target.value;var tags=_toConsumableArray(post.tags);tags[index]=value;setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tags:tags});});};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;_context2.next=4;return axios.put(\"https://localhost:4000/posts/\".concat(postId),{post:post},{withCredentials:true});case 4:alert(\"Post updated!\");navigate(\"/\");_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);console.error(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[1,8]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();if(!post)return\"Loading...\";return/*#__PURE__*/_jsxs(\"div\",{className:\"create-recipe\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:post.title,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tags\",children:\"Tags\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddTag,className:\"btn btn-secondary mb-3 add-tag-button\",children:\"+\"})]}),post.tags.map(function(tag,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tags\",value:tag,onChange:function onChange(event){return handleTagChange(event,index);},className:\"form-control\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(){return handleRemoveTag(index);},children:\"-\"})})]},index);})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddTag,className:\"btn btn-secondary mb-3\",children:\"Add Tag \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"Content\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",name:\"content\",value:post.content,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageUrl\",children:\"Image URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"imageUrl\",name:\"imageUrl\",value:post.imageUrl,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Upload\"})]})]});};","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","EditPost","navigate","_useState","_useState2","_slicedToArray","post","setPost","_useParams","postId","fetchPost","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","withCredentials","sent","data","t0","console","log","stop","apply","arguments","handleChange","event","_event$target","target","name","value","prevState","_objectSpread","_defineProperty","handleAddTag","tags","_toConsumableArray","handleRemoveTag","index","updatedTags","splice","handleTagChange","handleSubmit","_ref2","_callee2","_callee2$","_context2","preventDefault","put","alert","error","_x","className","children","onSubmit","htmlFor","type","id","title","onChange","onClick","map","tag","content","imageUrl"],"sources":["C:/Users/victo/Desktop/mern-community-app-copy/client/src/pages/editPost.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams,useNavigate } from \"react-router-dom\";\r\nexport const EditPost = () => {\r\n    const navigate=useNavigate();\r\n  const [post, setPost] = useState(null);\r\n  const { postId } = useParams();\r\n  useEffect(() => {\r\n    const fetchPost = async () => {\r\n      try {\r\n        const response = await axios.get(`https://localhost:4000/posts/${postId}`,{}, {\r\n          withCredentials: true\r\n        });\r\n        setPost(response.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n\r\n    fetchPost();\r\n  }, [postId]);\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    setPost((prevState) => ({\r\n      ...prevState,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleAddTag = () => {\r\n    setPost((prevState) => ({\r\n      ...prevState,\r\n      tags: [...prevState.tags, \"\"],\r\n    }));\r\n  };\r\n\r\n  const handleRemoveTag = (index) => {\r\n    const updatedTags = [...post.tags];\r\n    updatedTags.splice(index, 1);\r\n    setPost((prevState) => ({\r\n      ...prevState,\r\n      tags: updatedTags,\r\n    }));\r\n  };\r\n\r\n  const handleTagChange = (event, index) => {\r\n    const { value } = event.target;\r\n    const tags = [...post.tags];\r\n    tags[index] = value;\r\n    setPost((prevState) => ({\r\n      ...prevState,\r\n      tags,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      await axios.put(`https://localhost:4000/posts/${postId}`, {post},{withCredentials:true});\r\n      alert(\"Post updated!\");\r\n      navigate(\"/\");\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  if (!post) return \"Loading...\";\r\n\r\n  return (\r\n    <div className=\"create-recipe\">\r\n    <h2>New Post</h2>\r\n    <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n            <label htmlFor=\"title\">Title</label>\r\n            <input\r\n                type=\"text\"\r\n                id=\"title\"\r\n                name=\"title\"\r\n                value={post.title}\r\n                onChange={handleChange}\r\n                className=\"form-control\"\r\n            />\r\n        </div>\r\n\r\n          <div className=\"form-group\">\r\n                <div className=\"d-flex align-items-center\">\r\n                        <label htmlFor=\"tags\">Tags</label>\r\n                        <button type=\"button\" onClick={handleAddTag} className=\"btn btn-secondary mb-3 add-tag-button\">+</button>\r\n                    </div>\r\n            {post.tags.map((tag, index) => (\r\n                <div key={index} className=\"input-group mb-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"tags\"\r\n                        value={tag}\r\n                        onChange={(event) => handleTagChange(event, index)}\r\n                        className=\"form-control\"\r\n                    />\r\n<div className=\"input-group-append\">\r\n<button       type=\"button\" className=\"btn btn-danger\"  onClick={() => handleRemoveTag(index)}>-</button>\r\n</div>\r\n</div>\r\n))}\r\n</div>\r\n<button type=\"button\" onClick={handleAddTag} className=\"btn btn-secondary mb-3\">Add Tag </button>\r\n<div className=\"form-group\">\r\n<label htmlFor=\"content\">Content</label>\r\n<textarea\r\nid=\"content\"\r\nname=\"content\"\r\nvalue={post.content}\r\nonChange={handleChange}\r\nclassName=\"form-control\"/></div>\r\n<div className=\"form-group\">\r\n<label htmlFor=\"imageUrl\">Image URL</label>\r\n<input\r\ntype=\"text\"\r\nid=\"imageUrl\"\r\nname=\"imageUrl\"\r\nvalue={post.imageUrl}\r\n                onChange={handleChange}\r\n                className=\"form-control\"\r\n            /></div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">\r\n            Upload\r\n        </button>\r\n    </form>\r\n</div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}