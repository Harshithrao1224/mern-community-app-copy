{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/victo/Desktop/mern-community-app-copy/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import{useGetUserID}from\"../hooks/useGetUserID\";import{useNavigate}from\"react-router-dom\";import{useCookies}from\"react-cookie\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CreatePost=function CreatePost(){var userID=useGetUserID();var _useCookies=useCookies(['access_token']),_useCookies2=_slicedToArray(_useCookies,1),cookies=_useCookies2[0];var _useState=useState({title:\"\",tags:[],content:\"\",imageUrl:\"\",userOwner:userID}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var navigate=useNavigate();var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var handleAddTag=function handleAddTag(){setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tags:[].concat(_toConsumableArray(prevState.tags),[\"\"])});});};var handleRemoveTag=function handleRemoveTag(index){var updatedTags=_toConsumableArray(post.tags);updatedTags.splice(index,1);setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tags:updatedTags});});};var handleTagChange=function handleTagChange(event,index){var value=event.target.value;var tags=_toConsumableArray(post.tags);tags[index]=value;setPost(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{tags:tags});});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();console.log(post);token=cookies.access_token;_context.prev=3;_context.next=6;return axios.post(\"http://localhost:4000/posts\",post,{headers:{'Authorization':\"Bearer \".concat(token)},withCredentials:true});case 6:alert(\"Post uploaded!\");navigate(\"/\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);console.error(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[3,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"create-recipe\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:post.title,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tags\",children:\"Tags\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddTag,className:\"btn btn-secondary mb-3 add-tag-button\",children:\"+\"})]}),post.tags.map(function(tag,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"tags\",value:tag,onChange:function onChange(event){return handleTagChange(event,index);},className:\"form-control\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-append\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:function onClick(){return handleRemoveTag(index);},children:\"-\"})})]},index);})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"content\",children:\"Content\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"content\",name:\"content\",value:post.content,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageUrl\",children:\"Image URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"imageUrl\",name:\"imageUrl\",value:post.imageUrl,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Upload\"})]})]});};","map":{"version":3,"names":["React","useState","axios","useGetUserID","useNavigate","useCookies","jsx","_jsx","jsxs","_jsxs","CreatePost","userID","_useCookies","_useCookies2","_slicedToArray","cookies","_useState","title","tags","content","imageUrl","userOwner","_useState2","post","setPost","navigate","handleChange","event","_event$target","target","name","value","prevState","_objectSpread","_defineProperty","handleAddTag","concat","_toConsumableArray","handleRemoveTag","index","updatedTags","splice","handleTagChange","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","wrap","_callee$","_context","prev","next","preventDefault","console","log","access_token","headers","withCredentials","alert","t0","error","stop","_x","apply","arguments","className","children","onSubmit","htmlFor","type","id","onChange","onClick","map","tag"],"sources":["C:/Users/victo/Desktop/mern-community-app-copy/client/src/pages/create-post.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useGetUserID } from \"../hooks/useGetUserID\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useCookies } from \"react-cookie\";\r\nexport const CreatePost = () => {\r\n    const userID = useGetUserID();\r\n    const [cookies] = useCookies(['access_token']);\r\n    const [post, setPost] = useState({\r\n        title: \"\",\r\n        tags: [],\r\n        content: \"\",\r\n        imageUrl: \"\",\r\n        userOwner: userID\r\n    });\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (event) => {\r\n        const { name, value } = event.target;\r\n        setPost((prevState) => ({\r\n            ...prevState,\r\n            [name]: value,\r\n        }));\r\n    };\r\n\r\n    const handleAddTag = () => {\r\n        setPost((prevState) => ({\r\n            ...prevState,\r\n            tags: [...prevState.tags, \"\"],\r\n        }));\r\n    };\r\n\r\n    const handleRemoveTag = (index) => {\r\n        const updatedTags = [...post.tags];\r\n        updatedTags.splice(index, 1);\r\n        setPost((prevState) => ({\r\n            ...prevState,\r\n            tags: updatedTags,\r\n        }));\r\n    };\r\n\r\n    const handleTagChange = (event, index) => {\r\n        const { value } = event.target;\r\n        const tags = [...post.tags];\r\n        tags[index] = value;\r\n        setPost((prevState) => ({\r\n            ...prevState,\r\n            tags,\r\n        }));\r\n    };\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        console.log(post);\r\n        const token = cookies.access_token;\r\n        try {\r\n            await axios.post(\"http://localhost:4000/posts\", post, {\r\n                headers: {\r\n                  'Authorization': `Bearer ${token}`\r\n                },\r\n                withCredentials: true\r\n              });\r\n            alert(\"Post uploaded!\");\r\n            navigate(\"/\");\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"create-recipe\">\r\n            <h2>New Post</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"title\">Title</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        id=\"title\"\r\n                        name=\"title\"\r\n                        value={post.title}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                <div className=\"d-flex align-items-center\">\r\n                        <label htmlFor=\"tags\">Tags</label>\r\n                        <button type=\"button\" onClick={handleAddTag} className=\"btn btn-secondary mb-3 add-tag-button\">+</button>\r\n                    </div>\r\n                    {post.tags.map((tag, index) => (\r\n                        <div key={index} className=\"input-group mb-2\">\r\n                            <input\r\n                                type=\"text\"\r\n                                name=\"tags\"\r\n                                value={tag}\r\n                                onChange={(event) => handleTagChange(event, index)}\r\n                                className=\"form-control\"\r\n                            />\r\n     <div className=\"input-group-append\">\r\n    <button       type=\"button\" className=\"btn btn-danger\"  onClick={() => handleRemoveTag(index)}>-</button>\r\n        </div>\r\n     </div>\r\n     ))}\r\n     </div>\r\n  <div className=\"form-group\">\r\n   <label htmlFor=\"content\">Content</label>\r\n <textarea\r\n id=\"content\"\r\n  name=\"content\"\r\n value={post.content}\r\nonChange={handleChange}\r\n className=\"form-control\"/></div>\r\n<div className=\"form-group\">\r\n<label htmlFor=\"imageUrl\">Image URL</label>\r\n<input\r\n   type=\"text\"\r\nid=\"imageUrl\"\r\nname=\"imageUrl\"\r\nvalue={post.imageUrl}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    /></div>\r\n                <button type=\"submit\" className=\"btn btn-primary\">\r\n                    Upload\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}